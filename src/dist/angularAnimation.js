var animationModule=angular.module("angularAnimation",[]);animationModule.directive("animation",["$timeout","AnimationService",function(t,i){return{restrict:"A",scope:{type:"=?animation",animationDisabled:"=?",dynamic:"=?",trigger:"=?",triggerType:"=?",in:"=?",inDuration:"=?",inDelay:"=?",inIterationCount:"=?",out:"=?",outDuration:"=?",outDelay:"=?",outIterationCount:"=?"},link:function(t,n,e){var a=this;a.buildAnimationObject=function(){a.animationObject={scope:t,element:n,type:t.type,dynamic:t.dynamic,trigger:t.trigger,triggerType:t.triggerType,in:t.in,inDuration:t.inDuration,inDelay:t.inDelay,inIterationCount:t.inIterationCount,out:t.out,outDuration:t.outDuration,outDelay:t.outDelay,outIterationCount:t.outIterationCount}},t.$watch("animationDisabled",angular.bind(this,function(t,n){void 0==t||null==t||0==t?(a.buildAnimationObject(),a.animationService=new i(a.animationObject),a.animationService.initialize()):t||(a.buildAnimationObject(),a.animationService=new i(a.animationObject),a.animationService.initialize())}),!0)}}}]).factory("AnimationService",["$timeout","$q","$rootScope",function(t,i,n){var e=function(t){this.parentScope=t.scope,this.element=t.element,this.type=t.type,this.dynamic=t.dynamic||!1,void 0==t.trigger||null==t.trigger?this.hasTrigger=!1:(this.trigger=t.trigger,this.hasTrigger=!0),this.triggerType=t.triggerType||"default",this.in=t.in,this.inDuration=t.inDuration||10,this.inDelay=0,this.inIterationCount=t.inIterationCount||1,this.out=t.out||"fadeOut",this.outDuration=t.outDuration||8,this.outDelay=0,this.outIterationCount=t.outIterationCount||1,this.itemDisplayed=!1,this.animationFinished=!1,this.itemAnimating=!1};return e.prototype.initialize=function(){switch(this.hasTrigger&&this.subscribeTrigger(),this.dynamic&&(this.subscribeInAnimation(),this.subscribeOutAnimation(),this.subscribeStaticAnimation()),this.type){case"auto":this.itemDisplayed?console.log('Err: Auto with itemDisplayed in Initialize. Note: Auto does not allow trigger. Use "entrance" instead.'):this.itemIn();break;case"entrance":this.hasTrigger||this.itemIn();break;case"static":this.itemIn()}},e.prototype.itemIn=function(){var n=i.defer();return this.animationFinished=!1,this.itemAnimating=!0,this.element.removeClass(this.buildCssClasses("out")+" "+this.in+"-passive visibility-hidden").addClass(this.buildCssClasses("in")+" "+this.out+"-passive"),t(angular.bind(this,function(){this.animationFinished=!0,this.itemAnimating=!1,this.itemDisplayed=!0,n.resolve(!0)}),this.absoluteDuration("in")),n.promise},e.prototype.itemOut=function(){var n=i.defer();return this.animationFinished=!1,this.itemAnimating=!0,"static"==this.type?this.element.addClass(this.buildCssClasses("in")):this.element.removeClass(this.buildCssClasses("in")+" "+this.out+"-passive").addClass(this.buildCssClasses("out")+" "+this.in+"-passive"),t(angular.bind(this,function(){this.animationFinished=!0,this.itemAnimating=!1,this.itemDisplayed=!1,n.resolve(!0)}),this.absoluteDuration("out")),n.promise},e.prototype.absoluteDuration=function(t){var i=100*this[t+"Duration"],n=100*this[t+"Delay"],e=(n+i)*this[t+"IterationCount"];return e},e.prototype.buildCssClasses=function(t){var i="";return i+=this[t],i+=" duration-"+this[t+"Duration"],i+=" delay-"+this[t+"Delay"],i+=" iteration-count-"+this[t+"IterationCount"],i+=" animated"},e.prototype.subscribeTrigger=function(){this.parentScope.$watch("trigger",angular.bind(this,function(t,i){void 0!=t&&(this.trigger=t,this.trigger?this.itemIn():this.itemDisplayed?this.itemOut():this.element.addClass("visibility-hidden"))}),!0)},e.prototype.subscribeInAnimation=function(){this.parentScope.$watch("in",angular.bind(this,function(t,i){void 0!=t&&(this.in=t,this.element.removeClass(i+" "+t+"-passive").addClass(t+" "+t+"-passive"))}),!0),this.parentScope.$watch("inDuration",angular.bind(this,function(t,i){void 0!=t&&(this.inDuration=t,this.element.removeClass("duration-"+i).addClass("duration-"+t))}),!0),this.parentScope.$watch("inDelay",angular.bind(this,function(t,i){void 0!=t&&(this.inDelay=t,this.element.removeClass("delay-"+i).addClass("delay-"+t))}),!0),this.parentScope.$watch("inIterationCount",angular.bind(this,function(t,i){void 0!=t&&(this.inIterationCount=t,this.element.removeClass("iteration-count-"+i).addClass("iteration-count-"+t))}),!0)},e.prototype.subscribeOutAnimation=function(){this.parentScope.$watch("out",angular.bind(this,function(t,i){void 0!=t&&(this.out=t,this.element.removeClass(i+" "+t+"-passive").addClass(t+" "+t+"-passive"))}),!0),this.parentScope.$watch("outDuration",angular.bind(this,function(t,i){void 0!=t&&(this.outDuration=t,this.element.removeClass("duration-"+i).addClass("duration-"+t))}),!0),this.parentScope.$watch("outDelay",angular.bind(this,function(t,i){void 0!=t&&(this.outDelay=t,this.element.removeClass("delay-"+i).addClass("delay-"+t))}),!0),this.parentScope.$watch("outIterationCount",angular.bind(this,function(t,i){void 0!=t&&(this.outIterationCount=t,this.element.removeClass("iteration-count-"+i).addClass("iteration-count-"+t))}),!0)},e.prototype.subscribeStaticAnimation=function(){this.parentScope.$watch("static",angular.bind(this,function(t,i){void 0!=t&&(this.static=t,this.element.removeClass(i+" "+t+"-passive").addClass(t+" "+t+"-passive"))}),!0),this.parentScope.$watch("staticDuration",angular.bind(this,function(t,i){void 0!=t&&(this.staticDuration=t,this.element.removeClass("duration-"+i).addClass("duration-"+t))}),!0),this.parentScope.$watch("staticDelay",angular.bind(this,function(t,i){void 0!=t&&(this.staticDelay=t,this.element.removeClass("delay-"+i).addClass("delay-"+t))}),!0),this.parentScope.$watch("staticIterationCount",angular.bind(this,function(t,i){void 0!=t&&(this.staticIterationCount=t,this.element.removeClass("iteration-count-"+i).addClass("iteration-count-"+t))}),!0)},e}]);